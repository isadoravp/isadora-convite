<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meus 15</title>

<style>
:root{
  --azul:#1f3f73;
  --roxo:#4a3b6e;
  --vermelho:#7a2c2c;
  --dourado:#f2c94c;
}

html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
}

body{
  background:linear-gradient(45deg,var(--azul),var(--roxo),var(--vermelho),#c98b2b);
  position:relative;
  font-family:'Georgia',serif;
}

body::after{
  content:"";
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.06), transparent 42%),
    radial-gradient(circle at 80% 70%, rgba(255,255,255,0.05), transparent 48%);
  pointer-events:none;
  z-index:-1;
}

/* ====== CENÁRIO CASTELO ====== */
.cenario-castelo{
  position:fixed;
  left:50%;
  bottom:16%;
  transform:translateX(-50%);
  width:125%;
  max-width:1400px;
  height:90vh;
  background:url("assets/castelo1.png") center bottom no-repeat;
  background-size: 100% auto;
  z-index:0;
  pointer-events:none;
  opacity:0.95;
  filter:brightness(1.12) contrast(1.08) saturate(1.05);
  mask-image: linear-gradient(
  to top,
  transparent 0%,
  rgba(0,0,0,0.25) 12%,
  rgba(0,0,0,0.6) 28%,
  rgba(0,0,0,0.9) 45%,
  black 65%
);

-webkit-mask-image: linear-gradient(
  to top,
  transparent 0%,
  rgba(0,0,0,0.25) 12%,
  rgba(0,0,0,0.6) 28%,
  rgba(0,0,0,0.9) 45%,
  black 65%
);
}

.cenario-castelo::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:-60px;
  height:260px;
  background:linear-gradient(
    to top,
    rgba(31,63,115,0.65),
    rgba(31,63,115,0.35),
    rgba(31,63,115,0.15),
    transparent
  );
  filter:blur(48px);
  pointer-events:none;
}
  
/* ====== PARTÍCULAS ====== */
#particles{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1;
}

.spark{
  position:absolute;
  top:-10px;
  width:2px;
  height:2px;
  background:var(--dourado);
  box-shadow:0 0 4px #ffd700;
  border-radius:50%;
  animation:fall linear forwards;
}

@keyframes fall{
  to{transform:translateY(110vh);
     opacity:0;}
}

/* ====== CARTA ====== */
.carta-container{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:300px;
  max-width:78vw;
  cursor:pointer;
  z-index:2;
  filter:
    drop-shadow(0 18px 40px rgba(0,0,0,0.55))
    drop-shadow(0 0 22px rgba(180,220,255,0.35));
}

.carta-container img{
  width:100%;
  position:absolute;
  top:0;
  left:0;
  transition:opacity 1.4s ease, transform 1.6s ease;
}

.carta-aberta{
  opacity:0;
  transform:scale(0.95);
}

.carta-container.aberta .carta-fechada{
  animation:pulseGlow 2.8s ease-in-out forwards;
  opacity:0;
  transform:scale(0.9);
}

.carta-container.aberta .carta-aberta{
  animation:pulseGlow 2.8s ease-in-out forwards;
  opacity:1;
  transform:scale(1);
}
  
  @keyframes pulseGlow{
  0%{
    filter:drop-shadow(0 0 0 rgba(180,220,255,0));
  }
  40%{
    filter:drop-shadow(0 0 28px rgba(180,220,255,0.8));
  }
  100%{
    filter:drop-shadow(0 0 12px rgba(180,220,255,0.4));
  }
}

/* ====== FUMAÇA DOURADA MÁGICA ====== */

.fumaca-container{
  position:absolute;
  inset:0;
  pointer-events:none;
}

.smoke{
  position:absolute;
  bottom:13%;
  left:50%;
  border-radius:50%;
  animation:smokeUp 3.2s ease-out forwards;
  background:radial-gradient(
    circle,
    rgba(255,220,140,0.75) 0%,
    rgba(240,190,95,0.55) 35%,
    rgba(210,160,60,0.32) 60%,
    rgba(170,120,35,0.12) 100%
  );
  filter:blur(26px);
  box-shadow:
    0 0 32px rgba(255,210,120,0.65),
    0 0 68px rgba(240,180,80,0.35);
}

@keyframes smokeUp{
  0%{
    transform:translate(-50%,0) scale(0.85);
    opacity:0;
  }
  20%{
    opacity:0.45;
  }
  100%{
    transform:
      translate(
        calc(-50% + var(--x)),
        -90px
      )
      scale(1.1);
    opacity:0;
  }
}

.carta-container.aberta .smoke{
  animation:
    smokeUp 3.8s ease-out forwards,
    smokeGlow 1.8s ease-in-out infinite alternate;
}

@keyframes smokeGlow{
  from{
    filter:blur(26px) brightness(1);
    box-shadow:
      0 0 22px rgba(230,180,90,0.35),
      0 0 44px rgba(200,150,60,0.25);
  }
  to{
    filter:blur(28px) brightness(1.28);
    box-shadow:
      0 0 42px rgba(255,215,120,0.75),
      0 0 82px rgba(240,190,90,0.45);
  }
}

 /*====== GLITTER MÁGICO ====== */
.magic-glitter{
  position:absolute;
  width:6px;
  height:6px;
  bottom:15%;
  left:50%;
  border-radius:50%;
  background:radial-gradient(
    circle,
    #fff6c7 0%,
    #ffd700 45%,
    rgba(255,215,0,0.3) 70%,
    transparent 100%
  );
  filter: blur(12px);
  box-shadow:0 0 14px rgba(255,215,120,0.9);
  animation:glitterUp 2.2s ease-out forwards;
}

@keyframes glitterUp{
  0%{
    opacity:0;
    transform:translate(-50%,10px) scale(0.5);
  }
  30%{
    opacity:1;
  }
  100%{
    opacity:0;
    transform:
      translate(
        calc(-50% + var(--gx)),
        -140px
      )
      scale(1.3);
  }
}

@media (max-width:768px){

  .cenario-castelo{
    bottom:10%;
    height:52vh;
    width:118%;
    opacity:0.65;
    filter: brightness(1.18) contrast(1.1) saturate(1.08) drop-shadow(0 40px 90px rgba(0,0,0,0.45)) drop-shadow(0 0 140px rgba(150,200,255,0.55));
    background-position:center bottom;

    -webkit-mask-image:
      linear-gradient(
        to top,
        rgba(0,0,0,1) 0%,
        rgba(0,0,0,0.9) 55%,
        rgba(0,0,0,0.6) 70%,
        rgba(0,0,0,0.25) 82%,
        transparent 95%
      );

    mask-image:
      linear-gradient(
        to top,
        rgba(0,0,0,1) 0%,
        rgba(0,0,0,0.9) 55%,
        rgba(0,0,0,0.6) 70%,
        rgba(0,0,0,0.25) 82%,
        transparent 95%
      );
  }
}

/* ====== AUDIO OVERLAY ====== */
#audioOverlay{
  position:fixed;
  inset:0;
  z-index:9999;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="audioOverlay"></div>

<div class="cenario-castelo"></div>
<div id="particles"></div>
  
<div class="carta-container" id="carta">
  <img src="assets/carta-fechada.png" class="carta-fechada">
  <img src="assets/carta-aberta.png" class="carta-aberta">
  <div class="fumaca-container" id="fumaca"></div>
</div>

<script>
/* ====== MÚSICA ====== */
/* ====== MÚSICA ====== */
const entrada = new Audio('assets/audio/entrada.mp3');
entrada.volume = 0.7;
entrada.preload = 'auto';

const savedTime = localStorage.getItem('musicTime');
if (savedTime) entrada.currentTime = parseFloat(savedTime);

const overlay = document.getElementById('audioOverlay');

function startMusic() {
  entrada.currentTime = 0;
  entrada.play().catch(() => {});
  overlay.remove();
}

overlay.addEventListener('click', startMusic, { once: true });
overlay.addEventListener('touchstart', startMusic, { once: true });

/* ====== PARTÍCULAS ====== */
const particleContainer = document.getElementById('particles');
setInterval(() => {
  const s = document.createElement('div');
  s.className = 'spark';
  s.style.left = Math.random() * 100 + 'vw';
  s.style.animationDuration = (3 + Math.random() * 3) + 's';
  particleContainer.appendChild(s);
  setTimeout(() => s.remove(), 7000);
}, 300);

/* ====== CARTA + FUMAÇA + GLITTER ====== */
const carta = document.getElementById('carta');
const fumaca = document.getElementById('fumaca');

window.addEventListener('load', () => {

  setTimeout(() => {
    carta.classList.add('aberta');

    const largura = carta.offsetWidth;

    /* ====== FUMAÇA ====== */
    for (let i = 0; i < 30; i++) {
      setTimeout(() => {
        const smoke = document.createElement('div');
        smoke.className = 'smoke';
        smoke.style.setProperty('--x', `${Math.random() * largura / 2 - largura / 4}px`);
        const size = largura * 0.1 + Math.random() * largura * 0.15;
        smoke.style.width = smoke.style.height = size + 'px';
        fumaca.appendChild(smoke);
        setTimeout(() => smoke.remove(), 4200);
      }, i * 100);
    }

    /* ====== GLITTER ====== */
    for (let i = 0; i < 22; i++) {
      setTimeout(() => {
        const g = document.createElement('div');
        g.className = 'magic-glitter';
        g.style.setProperty('--gx', `${Math.random() * 120 - 60}px`);
        fumaca.appendChild(g);
        setTimeout(() => g.remove(), 2200);
      }, i * 140);
    }

  }, 1000);

  /* ====== IR PARA PÁGINA 2 ====== */
  setTimeout(() => {
    localStorage.setItem('musicTime', entrada.currentTime);
    window.location.href = 'convite.html';
  }, 5200);

});

</script>

</body>
</html>
