<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meus 15</title>

<style>
:root{
  --azul:#1f3f73;
  --roxo:#4a3b6e;
  --vermelho:#7a2c2c;
  --dourado:#f2c94c;
}

html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
}

body{
  background:linear-gradient(45deg,var(--azul),var(--roxo),var(--vermelho),#c98b2b);
  position:relative;
  font-family:'Georgia',serif;
}

body::after{
  content:"";
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.04), transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(255,255,255,0.03), transparent 45%);
  pointer-events:none;
  z-index:-1;
}

/* CENÁRIO CASTELO */
.cenario-castelo{
  position:fixed;
  left:50%;
  bottom:16%;
  transform: translateX(-50%) translateY(6%);
  width:110%;
  max-width:1400px;
  height:90vh;
  background:url("assets/castelo1.png") center bottom no-repeat;
  background-size:contain;
  z-index:0;
  pointer-events:none;
  opacity:0.75;
  filter:brightness(1.12) contrast(1.08) saturate(1.05);
  mask-image:radial-gradient(ellipse at center bottom,black 0%,transparent 95%);
}

.cenario-castelo::after{
  content:"";
  position:absolute;
  inset:-12% -10% -5% -10%;
  background:radial-gradient(ellipse at center bottom,rgba(160,210,255,.38),transparent 75%);
  filter:blur(48px);
}

/* PARTÍCULAS */
#particles{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:1;
}

.spark{
  position:absolute;
  top:-10px;
  width:2px;
  height:2px;
  background:var(--dourado);
  box-shadow:0 0 4px #ffd700;
  border-radius:50%;
  animation:fall linear forwards;
}

@keyframes fall{
  to{transform:translateY(110vh);opacity:0;}
}

/* =====================
   FUMAÇA AZUL
===================== */
#smoke-bg{
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 1;
}

.smoke-bg-puff{
  position: absolute;
  bottom: -120px;
  left: 50%;
  width: 280px;
  height: 280px;
  border-radius: 50%;
  background: radial-gradient(
    circle,
    rgba(60,110,190,0.35) 0%,
    rgba(45,85,155,0.25) 40%,
    rgba(30,60,120,0.15) 65%,
    transparent 80%
  );
  filter: blur(40px);
  opacity: 0;
  animation: smokeBgUp 14s linear forwards;
}

@keyframes smokeBgUp{
  from{
    transform: translate(-50%, 0) scale(1);
    opacity: 0;
  }
  15%{
    opacity: 0.6;
  }
  to{
    transform:
      translate(
        calc(-50% + var(--sx)),
        -120vh
      )
      scale(1.6);
    opacity: 0;
  }
}

/* CARTA */
.carta-container{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:320px;
  max-width:80vw;
  z-index:2;
}

.carta-container img{
  width:100%;
  position:absolute;
  transition:opacity 1.4s ease, transform 1.6s ease;
}

.carta-aberta{opacity:0;}

.carta-container.aberta .carta-fechada{
  opacity:0;
  transform:scale(.9);
}

.carta-container.aberta .carta-aberta{
  opacity:1;
}

/* AUDIO OVERLAY */
#audioOverlay{
  position:fixed;
  inset:0;
  z-index:9999;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="audioOverlay"></div>

<div class="cenario-castelo"></div>
  
<div id="particles"></div>
<div id="smoke-bg"></div>

<div class="carta-container" id="carta">
  <img src="assets/carta-fechada.png" class="carta-fechada">
  <img src="assets/carta-aberta.png" class="carta-aberta">
</div>

<script>
/* ================= MÚSICA ================= */
const music = new Audio('assets/audio/musica.mp3');
music.loop = true;
music.volume = 0.5;

const savedTime = localStorage.getItem('musicTime');
if(savedTime) music.currentTime = parseFloat(savedTime);

const overlay = document.getElementById('audioOverlay');

function startMusic(){
  music.play().catch(()=>{});
  overlay.remove();
}

overlay.addEventListener('click', startMusic, { once:true });
overlay.addEventListener('touchstart', startMusic, { once:true });
  
/* ================= PARTÍCULAS ================= */
const particleContainer = document.getElementById('particles');
setInterval(()=>{
  const s=document.createElement('div');
  s.className='spark';
  s.style.left=Math.random()*100+'vw';
  s.style.animationDuration=(3+Math.random()*3)+'s';
  particleContainer.appendChild(s);
  setTimeout(()=>s.remove(),7000);
},300);

/* ================= FUMAÇA AZUL FUNDO ================= */
const smokeBg = document.getElementById('smoke-bg');

function createSmokeBg(){
  const puff = document.createElement('div');
  puff.className = 'smoke-bg-puff';

  puff.style.left = Math.random() * 100 + 'vw';
  puff.style.setProperty('--sx', `${Math.random()*300 - 150}px`);

  const size = 160 + Math.random()*120;
  puff.style.width = puff.style.height = size + 'px';

  smokeBg.appendChild(puff);

  setTimeout(() => puff.remove(), 15000);
}

setInterval(createSmokeBg, 1800);

window.addEventListener('load',()=>{
  setTimeout(()=>document.getElementById('carta').classList.add('aberta'),1000);
  setTimeout(()=>{
    localStorage.setItem('musicTime', music.currentTime);
    window.location.href='convite.html';
  },5200);
});
</script>

</body>
</html>
